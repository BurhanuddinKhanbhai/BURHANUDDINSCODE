<html>
<head>
<title>TuningOpModes.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
TuningOpModes.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">tuning</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">androidx</span><span class="s2">.</span><span class="s1">annotation</span><span class="s2">.</span><span class="s1">NonNull</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">dashboard</span><span class="s2">.</span><span class="s1">FtcDashboard</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">dashboard</span><span class="s2">.</span><span class="s1">config</span><span class="s2">.</span><span class="s1">reflection</span><span class="s2">.</span><span class="s1">ReflectionConfig</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">MotorFeedforward</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">Pose2d</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">AngularRampLogger</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">DeadWheelDirectionDebugger</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">DriveType</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">DriveView</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">DriveViewFactory</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">Encoder</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">EncoderGroup</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">EncoderRef</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">ForwardPushTest</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">ForwardRampLogger</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">LateralPushTest</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">LateralRampLogger</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">LazyImu</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">ManualFeedforwardTuner</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">MecanumMotorDirectionDebugger</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSAngularScalarTuner</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSEncoderGroup</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSHeadingOffsetTuner</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSIMU</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSLinearScalarTuner</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">OTOSPositionOffsetTuner</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">PinpointEncoderGroup</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">PinpointIMU</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">acmerobotics</span><span class="s2">.</span><span class="s1">roadrunner</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">PinpointView</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">hardware</span><span class="s2">.</span><span class="s1">gobilda</span><span class="s2">.</span><span class="s1">GoBildaPinpointDriver</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">hardware</span><span class="s2">.</span><span class="s1">lynx</span><span class="s2">.</span><span class="s1">LynxModule</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">eventloop</span><span class="s2">.</span><span class="s1">opmode</span><span class="s2">.</span><span class="s1">Disabled</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">eventloop</span><span class="s2">.</span><span class="s1">opmode</span><span class="s2">.</span><span class="s1">OpMode</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">eventloop</span><span class="s2">.</span><span class="s1">opmode</span><span class="s2">.</span><span class="s1">OpModeManager</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">eventloop</span><span class="s2">.</span><span class="s1">opmode</span><span class="s2">.</span><span class="s1">OpModeRegistrar</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">qualcomm</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">hardware</span><span class="s2">.</span><span class="s1">DcMotorSimple</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">external</span><span class="s2">.</span><span class="s1">navigation</span><span class="s2">.</span><span class="s1">UnnormalizedAngleUnit</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">robotcore</span><span class="s2">.</span><span class="s1">internal</span><span class="s2">.</span><span class="s1">opmode</span><span class="s2">.</span><span class="s1">OpModeMeta</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">MecanumDrive</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">OTOSLocalizer</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">PinpointLocalizer</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">TankDrive</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">ThreeDeadWheelLocalizer</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">firstinspires</span><span class="s2">.</span><span class="s1">ftc</span><span class="s2">.</span><span class="s1">teamcode</span><span class="s2">.</span><span class="s1">TwoDeadWheelLocalizer</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">ArrayList</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Arrays</span><span class="s2">;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">List</span><span class="s2">;</span>
<span class="s1">@Disabled</span>
<span class="s0">public final class </span><span class="s1">TuningOpModes </span><span class="s2">{</span>
    <span class="s3">// TODO: change this to TankDrive.class if you're using tank</span>
    <span class="s0">public static final </span><span class="s1">Class</span><span class="s2">&lt;?&gt; </span><span class="s1">DRIVE_CLASS </span><span class="s2">= </span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s0">class</span><span class="s2">;</span>

    <span class="s0">public static final </span><span class="s1">String GROUP </span><span class="s2">= </span><span class="s4">&quot;quickstart&quot;</span><span class="s2">;</span>
    <span class="s0">public static final boolean </span><span class="s1">DISABLED </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span>

    <span class="s0">private </span><span class="s1">TuningOpModes</span><span class="s2">() {}</span>

    <span class="s0">private static </span><span class="s1">OpModeMeta metaForClass</span><span class="s2">(</span><span class="s1">Class</span><span class="s2">&lt;? </span><span class="s0">extends </span><span class="s1">OpMode</span><span class="s2">&gt; </span><span class="s1">cls</span><span class="s2">) {</span>
        <span class="s0">return new </span><span class="s1">OpModeMeta</span><span class="s2">.</span><span class="s1">Builder</span><span class="s2">()</span>
                <span class="s2">.</span><span class="s1">setName</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">.</span><span class="s1">getSimpleName</span><span class="s2">())</span>
                <span class="s2">.</span><span class="s1">setGroup</span><span class="s2">(</span><span class="s1">GROUP</span><span class="s2">)</span>
                <span class="s2">.</span><span class="s1">setFlavor</span><span class="s2">(</span><span class="s1">OpModeMeta</span><span class="s2">.</span><span class="s1">Flavor</span><span class="s2">.</span><span class="s1">TELEOP</span><span class="s2">)</span>
                <span class="s2">.</span><span class="s1">build</span><span class="s2">();</span>
    <span class="s2">}</span>

    <span class="s0">private static </span><span class="s1">PinpointView makePinpointView</span><span class="s2">(</span><span class="s1">PinpointLocalizer pl</span><span class="s2">) {</span>
        <span class="s0">return new </span><span class="s1">PinpointView</span><span class="s2">() {</span>
            <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection parDirection </span><span class="s2">= </span><span class="s1">pl</span><span class="s2">.</span><span class="s1">initialParDirection</span><span class="s2">;</span>
            <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection perpDirection </span><span class="s2">= </span><span class="s1">pl</span><span class="s2">.</span><span class="s1">initialPerpDirection</span><span class="s2">;</span>

            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">update</span><span class="s2">() {</span>
                <span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">update</span><span class="s2">();</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public int </span><span class="s1">getParEncoderPosition</span><span class="s2">() {</span>
                <span class="s0">return </span><span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">getEncoderX</span><span class="s2">();</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public int </span><span class="s1">getPerpEncoderPosition</span><span class="s2">() {</span>
                <span class="s0">return </span><span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">getEncoderY</span><span class="s2">();</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public float </span><span class="s1">getHeadingVelocity</span><span class="s2">(</span><span class="s1">UnnormalizedAngleUnit unit</span><span class="s2">) {</span>
                <span class="s0">return </span><span class="s2">(</span><span class="s0">float</span><span class="s2">) </span><span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">getHeadingVelocity</span><span class="s2">(</span><span class="s1">unit</span><span class="s2">);</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">setParDirection</span><span class="s2">(</span><span class="s1">@NonNull DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction direction</span><span class="s2">) {</span>
                <span class="s1">parDirection </span><span class="s2">= </span><span class="s1">direction </span><span class="s2">== </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">?</span>
                        <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">:</span>
                        <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">REVERSED</span><span class="s2">;</span>
                <span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">setEncoderDirections</span><span class="s2">(</span><span class="s1">parDirection</span><span class="s2">, </span><span class="s1">perpDirection</span><span class="s2">);</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction getParDirection</span><span class="s2">() {</span>
                <span class="s0">return </span><span class="s1">parDirection </span><span class="s2">== </span><span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">?</span>
                        <span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">: </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">REVERSE</span><span class="s2">;</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">setPerpDirection</span><span class="s2">(</span><span class="s1">@NonNull DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction direction</span><span class="s2">) {</span>
                <span class="s1">perpDirection </span><span class="s2">= </span><span class="s1">direction </span><span class="s2">== </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">?</span>
                        <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">:</span>
                        <span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">REVERSED</span><span class="s2">;</span>
                <span class="s1">pl</span><span class="s2">.</span><span class="s1">driver</span><span class="s2">.</span><span class="s1">setEncoderDirections</span><span class="s2">(</span><span class="s1">parDirection</span><span class="s2">, </span><span class="s1">perpDirection</span><span class="s2">);</span>
            <span class="s2">}</span>

            <span class="s1">@Override</span>
            <span class="s0">public </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction getPerpDirection</span><span class="s2">() {</span>
                <span class="s0">return </span><span class="s1">perpDirection </span><span class="s2">== </span><span class="s1">GoBildaPinpointDriver</span><span class="s2">.</span><span class="s1">EncoderDirection</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">?</span>
                        <span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">FORWARD </span><span class="s2">: </span><span class="s1">DcMotorSimple</span><span class="s2">.</span><span class="s1">Direction</span><span class="s2">.</span><span class="s1">REVERSE</span><span class="s2">;</span>
            <span class="s2">}</span>
        <span class="s2">};</span>
    <span class="s2">}</span>

    <span class="s1">@OpModeRegistrar</span>
    <span class="s0">public static void </span><span class="s1">register</span><span class="s2">(</span><span class="s1">OpModeManager manager</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">DISABLED</span><span class="s2">) </span><span class="s0">return</span><span class="s2">;</span>

        <span class="s1">DriveViewFactory dvf</span><span class="s2">;</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">DRIVE_CLASS</span><span class="s2">.</span><span class="s1">equals</span><span class="s2">(</span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s0">class</span><span class="s2">)) {</span>
            <span class="s1">dvf </span><span class="s2">= </span><span class="s1">hardwareMap -&gt; </span><span class="s2">{</span>
                <span class="s1">MecanumDrive md </span><span class="s2">= </span><span class="s0">new </span><span class="s1">MecanumDrive</span><span class="s2">(</span><span class="s1">hardwareMap</span><span class="s2">, </span><span class="s0">new </span><span class="s1">Pose2d</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                <span class="s1">LazyImu lazyImu </span><span class="s2">= </span><span class="s1">md</span><span class="s2">.</span><span class="s1">lazyImu</span><span class="s2">;</span>

                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderGroup</span><span class="s2">&gt; </span><span class="s1">encoderGroups </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderRef</span><span class="s2">&gt; </span><span class="s1">leftEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;(), </span><span class="s1">rightEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderRef</span><span class="s2">&gt; </span><span class="s1">parEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;(), </span><span class="s1">perpEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s0">if </span><span class="s2">(</span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer</span><span class="s2">) {</span>
                    <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer dl </span><span class="s2">= (</span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">leftFront</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">leftBack</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">rightFront</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">rightBack</span><span class="s2">)</span>
                    <span class="s2">));</span>
                    <span class="s1">leftEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">leftEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">rightEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">));</span>
                    <span class="s1">rightEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">3</span><span class="s2">));</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">ThreeDeadWheelLocalizer</span><span class="s2">) {</span>
                    <span class="s1">ThreeDeadWheelLocalizer dl </span><span class="s2">= (</span><span class="s1">ThreeDeadWheelLocalizer</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par0</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par1</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">perp</span><span class="s2">)</span>
                    <span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">));</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">TwoDeadWheelLocalizer</span><span class="s2">) {</span>
                    <span class="s1">TwoDeadWheelLocalizer dl </span><span class="s2">= (</span><span class="s1">TwoDeadWheelLocalizer</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">perp</span><span class="s2">)</span>
                    <span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">OTOSLocalizer</span><span class="s2">) {</span>
                    <span class="s1">OTOSLocalizer ol </span><span class="s2">= (</span><span class="s1">OTOSLocalizer</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OTOSEncoderGroup</span><span class="s2">(</span><span class="s1">ol</span><span class="s2">.</span><span class="s1">otos</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">lazyImu </span><span class="s2">= </span><span class="s0">new </span><span class="s1">OTOSIMU</span><span class="s2">(</span><span class="s1">ol</span><span class="s2">.</span><span class="s1">otos</span><span class="s2">);</span>
                <span class="s2">}  </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">PinpointLocalizer</span><span class="s2">) {</span>
                    <span class="s1">PinpointView pv </span><span class="s2">= </span><span class="s1">makePinpointView</span><span class="s2">((</span><span class="s1">PinpointLocalizer</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">);</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">PinpointEncoderGroup</span><span class="s2">(</span><span class="s1">pv</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">lazyImu </span><span class="s2">= </span><span class="s0">new </span><span class="s1">PinpointIMU</span><span class="s2">(</span><span class="s1">pv</span><span class="s2">);</span>
                <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                    <span class="s0">throw new </span><span class="s1">RuntimeException</span><span class="s2">(</span><span class="s4">&quot;unknown localizer: &quot; </span><span class="s2">+ </span><span class="s1">md</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">.</span><span class="s1">getClass</span><span class="s2">().</span><span class="s1">getName</span><span class="s2">());</span>
                <span class="s2">}</span>

                <span class="s0">return new </span><span class="s1">DriveView</span><span class="s2">(</span>
                    <span class="s1">DriveType</span><span class="s2">.</span><span class="s1">MECANUM</span><span class="s2">,</span>
                        <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">,</span>
                        <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">maxWheelVel</span><span class="s2">,</span>
                        <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">minProfileAccel</span><span class="s2">,</span>
                        <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">maxProfileAccel</span><span class="s2">,</span>
                        <span class="s1">encoderGroups</span><span class="s2">,</span>
                        <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span>
                                <span class="s1">md</span><span class="s2">.</span><span class="s1">leftFront</span><span class="s2">,</span>
                                <span class="s1">md</span><span class="s2">.</span><span class="s1">leftBack</span>
                        <span class="s2">),</span>
                        <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span>
                                <span class="s1">md</span><span class="s2">.</span><span class="s1">rightFront</span><span class="s2">,</span>
                                <span class="s1">md</span><span class="s2">.</span><span class="s1">rightBack</span>
                        <span class="s2">),</span>
                        <span class="s1">leftEncs</span><span class="s2">,</span>
                        <span class="s1">rightEncs</span><span class="s2">,</span>
                        <span class="s1">parEncs</span><span class="s2">,</span>
                        <span class="s1">perpEncs</span><span class="s2">,</span>
                        <span class="s1">lazyImu</span><span class="s2">,</span>
                        <span class="s1">md</span><span class="s2">.</span><span class="s1">voltageSensor</span><span class="s2">,</span>
                        <span class="s2">() </span><span class="s1">-&gt; </span><span class="s0">new </span><span class="s1">MotorFeedforward</span><span class="s2">(</span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kS</span><span class="s2">,</span>
                                <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kV </span><span class="s2">/ </span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">,</span>
                                <span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kA </span><span class="s2">/ </span><span class="s1">MecanumDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">),</span>
                        <span class="s5">0</span>
                <span class="s2">);</span>
            <span class="s2">};</span>
        <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">DRIVE_CLASS</span><span class="s2">.</span><span class="s1">equals</span><span class="s2">(</span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s0">class</span><span class="s2">)) {</span>
            <span class="s1">dvf </span><span class="s2">= </span><span class="s1">hardwareMap -&gt; </span><span class="s2">{</span>
                <span class="s1">TankDrive td </span><span class="s2">= </span><span class="s0">new </span><span class="s1">TankDrive</span><span class="s2">(</span><span class="s1">hardwareMap</span><span class="s2">, </span><span class="s0">new </span><span class="s1">Pose2d</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                <span class="s1">LazyImu lazyImu </span><span class="s2">= </span><span class="s1">td</span><span class="s2">.</span><span class="s1">lazyImu</span><span class="s2">;</span>

                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderGroup</span><span class="s2">&gt; </span><span class="s1">encoderGroups </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderRef</span><span class="s2">&gt; </span><span class="s1">leftEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;(), </span><span class="s1">rightEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">EncoderRef</span><span class="s2">&gt; </span><span class="s1">parEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;(), </span><span class="s1">perpEncs </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                <span class="s0">if </span><span class="s2">(</span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer</span><span class="s2">) {</span>
                    <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer dl </span><span class="s2">= (</span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">DriveLocalizer</span><span class="s2">) </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Encoder</span><span class="s2">&gt; </span><span class="s1">allEncoders </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span>
                    <span class="s1">allEncoders</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">leftEncs</span><span class="s2">);</span>
                    <span class="s1">allEncoders</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">rightEncs</span><span class="s2">);</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">allEncoders</span>
                    <span class="s2">));</span>
                    <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">leftEncs</span><span class="s2">.</span><span class="s1">size</span><span class="s2">(); </span><span class="s1">i</span><span class="s2">++) {</span>
                        <span class="s1">leftEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s1">i</span><span class="s2">));</span>
                    <span class="s2">}</span>
                    <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">rightEncs</span><span class="s2">.</span><span class="s1">size</span><span class="s2">(); </span><span class="s1">i</span><span class="s2">++) {</span>
                        <span class="s1">rightEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">leftEncs</span><span class="s2">.</span><span class="s1">size</span><span class="s2">() + </span><span class="s1">i</span><span class="s2">));</span>
                    <span class="s2">}</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">ThreeDeadWheelLocalizer</span><span class="s2">) {</span>
                    <span class="s1">ThreeDeadWheelLocalizer dl </span><span class="s2">= (</span><span class="s1">ThreeDeadWheelLocalizer</span><span class="s2">) </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par0</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par1</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">perp</span><span class="s2">)</span>
                    <span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">2</span><span class="s2">));</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">TwoDeadWheelLocalizer</span><span class="s2">) {</span>
                    <span class="s1">TwoDeadWheelLocalizer dl </span><span class="s2">= (</span><span class="s1">TwoDeadWheelLocalizer</span><span class="s2">) </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LynxQuadratureEncoderGroup</span><span class="s2">(</span>
                            <span class="s1">hardwareMap</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">(</span><span class="s1">LynxModule</span><span class="s2">.</span><span class="s0">class</span><span class="s2">),</span>
                            <span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span><span class="s1">dl</span><span class="s2">.</span><span class="s1">par</span><span class="s2">, </span><span class="s1">dl</span><span class="s2">.</span><span class="s1">perp</span><span class="s2">)</span>
                    <span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                <span class="s2">}  </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">PinpointLocalizer</span><span class="s2">) {</span>
                    <span class="s1">PinpointView pv </span><span class="s2">= </span><span class="s1">makePinpointView</span><span class="s2">((</span><span class="s1">PinpointLocalizer</span><span class="s2">) </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">);</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">PinpointEncoderGroup</span><span class="s2">(</span><span class="s1">pv</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">lazyImu </span><span class="s2">= </span><span class="s0">new </span><span class="s1">PinpointIMU</span><span class="s2">(</span><span class="s1">pv</span><span class="s2">);</span>
                <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer </span><span class="s0">instanceof </span><span class="s1">OTOSLocalizer</span><span class="s2">) {</span>
                    <span class="s1">OTOSLocalizer ol </span><span class="s2">= (</span><span class="s1">OTOSLocalizer</span><span class="s2">) </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">;</span>
                    <span class="s1">encoderGroups</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OTOSEncoderGroup</span><span class="s2">(</span><span class="s1">ol</span><span class="s2">.</span><span class="s1">otos</span><span class="s2">));</span>
                    <span class="s1">parEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">0</span><span class="s2">));</span>
                    <span class="s1">perpEncs</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s0">new </span><span class="s1">EncoderRef</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">));</span>
                    <span class="s1">lazyImu </span><span class="s2">= </span><span class="s0">new </span><span class="s1">OTOSIMU</span><span class="s2">(</span><span class="s1">ol</span><span class="s2">.</span><span class="s1">otos</span><span class="s2">);</span>
                <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                    <span class="s0">throw new </span><span class="s1">RuntimeException</span><span class="s2">(</span><span class="s4">&quot;unknown localizer: &quot; </span><span class="s2">+ </span><span class="s1">td</span><span class="s2">.</span><span class="s1">localizer</span><span class="s2">.</span><span class="s1">getClass</span><span class="s2">().</span><span class="s1">getName</span><span class="s2">());</span>
                <span class="s2">}</span>

                <span class="s0">return new </span><span class="s1">DriveView</span><span class="s2">(</span>
                        <span class="s1">DriveType</span><span class="s2">.</span><span class="s1">TANK</span><span class="s2">,</span>
                        <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">,</span>
                        <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">maxWheelVel</span><span class="s2">,</span>
                        <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">minProfileAccel</span><span class="s2">,</span>
                        <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">maxProfileAccel</span><span class="s2">,</span>
                        <span class="s1">encoderGroups</span><span class="s2">,</span>
                        <span class="s1">td</span><span class="s2">.</span><span class="s1">leftMotors</span><span class="s2">,</span>
                        <span class="s1">td</span><span class="s2">.</span><span class="s1">rightMotors</span><span class="s2">,</span>
                        <span class="s1">leftEncs</span><span class="s2">,</span>
                        <span class="s1">rightEncs</span><span class="s2">,</span>
                        <span class="s1">parEncs</span><span class="s2">,</span>
                        <span class="s1">perpEncs</span><span class="s2">,</span>
                        <span class="s1">lazyImu</span><span class="s2">,</span>
                        <span class="s1">td</span><span class="s2">.</span><span class="s1">voltageSensor</span><span class="s2">,</span>
                        <span class="s2">() </span><span class="s1">-&gt; </span><span class="s0">new </span><span class="s1">MotorFeedforward</span><span class="s2">(</span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kS</span><span class="s2">,</span>
                                <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kV </span><span class="s2">/ </span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">,</span>
                                <span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">kA </span><span class="s2">/ </span><span class="s1">TankDrive</span><span class="s2">.</span><span class="s1">PARAMS</span><span class="s2">.</span><span class="s1">inPerTick</span><span class="s2">),</span>
                        <span class="s5">0</span>
                <span class="s2">);</span>
            <span class="s2">};</span>
        <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
            <span class="s0">throw new </span><span class="s1">RuntimeException</span><span class="s2">();</span>
        <span class="s2">}</span>

        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">AngularRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">AngularRampLogger</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">ForwardPushTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">ForwardPushTest</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">ForwardRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">ForwardRampLogger</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">LateralPushTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">LateralPushTest</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">LateralRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">LateralRampLogger</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">ManualFeedforwardTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">ManualFeedforwardTuner</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">MecanumMotorDirectionDebugger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">MecanumMotorDirectionDebugger</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">DeadWheelDirectionDebugger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">DeadWheelDirectionDebugger</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>

        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">ManualFeedbackTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s1">ManualFeedbackTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">SplineTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s1">SplineTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">LocalizationTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s1">LocalizationTest</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span>

        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">OTOSAngularScalarTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">OTOSAngularScalarTuner</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">OTOSLinearScalarTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">OTOSLinearScalarTuner</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">OTOSHeadingOffsetTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">OTOSHeadingOffsetTuner</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>
        <span class="s1">manager</span><span class="s2">.</span><span class="s1">register</span><span class="s2">(</span><span class="s1">metaForClass</span><span class="s2">(</span><span class="s1">OTOSPositionOffsetTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">), </span><span class="s0">new </span><span class="s1">OTOSPositionOffsetTuner</span><span class="s2">(</span><span class="s1">dvf</span><span class="s2">));</span>

        <span class="s1">FtcDashboard</span><span class="s2">.</span><span class="s1">getInstance</span><span class="s2">().</span><span class="s1">withConfigRoot</span><span class="s2">(</span><span class="s1">configRoot -&gt; </span><span class="s2">{</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s1">Class</span><span class="s2">&lt;?&gt; </span><span class="s1">c </span><span class="s2">: </span><span class="s1">Arrays</span><span class="s2">.</span><span class="s1">asList</span><span class="s2">(</span>
                    <span class="s1">AngularRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">,</span>
                    <span class="s1">ForwardRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">,</span>
                    <span class="s1">LateralRampLogger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">,</span>
                    <span class="s1">ManualFeedforwardTuner</span><span class="s2">.</span><span class="s0">class</span><span class="s2">,</span>
                    <span class="s1">MecanumMotorDirectionDebugger</span><span class="s2">.</span><span class="s0">class</span><span class="s2">,</span>
                    <span class="s1">ManualFeedbackTuner</span><span class="s2">.</span><span class="s0">class</span>
            <span class="s2">)) {</span>
                <span class="s1">configRoot</span><span class="s2">.</span><span class="s1">putVariable</span><span class="s2">(</span><span class="s1">c</span><span class="s2">.</span><span class="s1">getSimpleName</span><span class="s2">(), </span><span class="s1">ReflectionConfig</span><span class="s2">.</span><span class="s1">createVariableFromClass</span><span class="s2">(</span><span class="s1">c</span><span class="s2">));</span>
            <span class="s2">}</span>
        <span class="s2">});</span>
    <span class="s2">}</span>
<span class="s2">}</span>
</pre>
</body>
</html>